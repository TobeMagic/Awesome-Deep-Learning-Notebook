## 使用 Keras 回调函数



## TensorBoard 可视化工具

TensorBoard 是一个强大的工具，它可以帮助深度学习研究者和开发者可视化和分析训练过程中的数据和模型结构，包括损失曲线、精度曲线、计算图形等等。它是 TensorFlow 的一个内置组件，可以在模型训练过程中，实时记录模型的训练指标，并以交互方式展示这些指标。

对于 TensorBoard 中的直方图（histogram），**可以看作是训练过程中每一层的权重随时间的变化情况的概览**。我们可以通过查看直方图来了解权重和偏差的变化情况。

在 TensorBoard 中，我们可以通过添加 Summary 操作和 FileWriter 操作来记录和保存数据，然后在 TensorBoard 界面上观察记录的数据。例如：

```python
# 在 Keras 中添加 Summary 操作示例
tensorboard_callback = tf.keras.callbacks.TensorBoard(log_dir=path_to_log_dir)
model.fit(train_images, train_labels, epochs=5, callbacks=[tensorboard_callback])
```

其中 `path_to_log_dir` 是日志保存的路径。

然后，可以在命令行中启动 TensorBoard 服务器，并在浏览器中打开 TensorBoard 界面，从而查看各种训练指标的变化情况。例如，可以通过在命令行中输入以下命令来启动 TensorBoard：

```
tensorboard --logdir=path_to_log_dir
```

其中 `path_to_log_dir` 是你保存日志文件的路径。

在 TensorBoard 界面，可以选择直方图选项卡，在该选项卡下，选择任何一层的权重或偏差变量，即可查看它们随时间的变化情况的概览和详细信息。对于每个权重或偏差变量，可以查看它的最大值、最小值、平均值等信息，并可以以不同的颜色表示它们在不同时期的值分布。

### 坐标轴参数

在 TensorBoard 的「概览」和「直方图」选项卡中，我们可以看到三种不同的时间类型：

- Step：步数，代表模型在训练中经过的步数，每一步对应一次参数更新；
- Relative：相对时间，以秒为单位，相对于训练开始的时间；
- Wall：墙上时间，也是以秒为单位，但是它**不会受到计算机睡眠或暂停等因素的影响，而是通常以系统的物理时钟为基准。** 

这三种时间类型在 TensorBoard 中的标注方式分别是「Step」、「Relative」和「Wall」，可以通过切换不同的时间类型来查看模型在训练过程中的表现情况。在实际的训练过程中，这些时间标记具有不同的用途，以满足不同的需求。

例如，如果我们想比较模型在不同时期的性能，可以使用 Wall 时间来查看模型在训练期间的损失变化情况。而如果我们想比较模型在相同时间内的性能，可以使用 Relative 时间来查看模型在训练过程中的训练和验证误差曲线。同时，如果我们想比较模型在不同步骤下的性能，可以使用 Step 时间来查看模型训练期间的参数变化情况，例如每次参数更新计算的 L2 范数、参数梯度的值等。

### 各个模块

这五个模块代表了 TensorBoard 中的五种不同的可视化类型：

1. TIME SERIES（时间序列）：在给定时间内观察变量的值随时间变化的趋势。这可以帮助我们**识别和跟踪随时间发生的变化。**

2. SCALARS（标量）：单个数字随时间变化的趋势，例如损失、准确性等指标。这对于**监视训练进程中单个指标**的变化非常有用。

3. GRAPHS（图表）：TensorFlow 模型结构的可视化，包括计算图或神经网络的结构。这可以帮助我们理解**模型的复杂性并调试模型**。

4. DISTRIBUTIONS（分布）：观察张量值在训练期间如何分布的直方图。这可以帮助我们了解**权重和偏差参数等张量的分布情况**。

5. HISTOGRAMS（直方图）：与分布类似，但显示的是**张量值的频率直方图**。这可以帮助我们更好地了解**张量值的分布情况**。

 开发最先进模型的重要最佳实践

